<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Will You Be My Valentine?</title>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Quicksand:wght@300;400;500;600&family=Great+Vibes&display=swap" rel="stylesheet">

    <style>
        /* ============================================
           CSS VARIABLES
        ============================================ */
        :root {
            --color-primary: #e8b4b8;
            --color-secondary: #a67c7d;
            --color-accent: #d4a5a5;
            --color-gold: #d4af37;
            --color-cream: #fdf8f5;
            --color-text: #5d4e4e;
            --color-text-light: #8b7e7e;
            --font-script: 'Great Vibes', cursive;
            --font-fun: 'Pacifico', cursive;
            --font-body: 'Quicksand', sans-serif;
            --transition-smooth: cubic-bezier(0.4, 0, 0.2, 1);
            --transition-bounce: cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        /* ============================================
           BASE STYLES
        ============================================ */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html, body {
            height: 100%;
            cursor: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><text y="24" font-size="24">üíï</text></svg>') 16 16, auto;
        }

        body {
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            font-family: var(--font-body);
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #1a1a2e 100%);
            overflow: hidden;
            position: relative;
        }

        /* ============================================
           STARRY NIGHT BACKGROUND
        ============================================ */
        .stars {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            overflow: hidden;
        }

        .star {
            position: absolute;
            width: 3px;
            height: 3px;
            background: white;
            border-radius: 50%;
            animation: twinkle 2s ease-in-out infinite;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0.3; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.5); }
        }

        /* Shooting star */
        .shooting-star {
            position: absolute;
            width: 100px;
            height: 2px;
            background: linear-gradient(90deg, white, transparent);
            border-radius: 50%;
            animation: shoot 3s ease-in-out infinite;
            opacity: 0;
        }

        @keyframes shoot {
            0% { transform: translateX(0) translateY(0); opacity: 0; }
            10% { opacity: 1; }
            100% { transform: translateX(-500px) translateY(300px); opacity: 0; }
        }

        /* ============================================
           BACKGROUND IMAGE OVERLAY
        ============================================ */
        .background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
            pointer-events: none;
        }

        .background::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            /* REPLACE THIS IMAGE URL WITH YOUR OWN */
            background-image: url('https://images.unsplash.com/photo-1518199266791-5375a83190b7?w=1920&q=80');
            background-size: cover;
            background-position: center;
            opacity: 0.15;
        }

        /* ============================================
           FLOATING ELEMENTS
        ============================================ */
        .floating-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 2;
            overflow: hidden;
        }

        .floating-heart {
            position: absolute;
            bottom: -50px;
            opacity: 0;
            animation: floatUp 10s ease-in-out infinite;
            filter: drop-shadow(0 0 10px rgba(255, 100, 150, 0.5));
        }

        @keyframes floatUp {
            0% {
                transform: translateY(0) rotate(0deg) scale(0.5);
                opacity: 0;
            }
            10% { opacity: 0.8; }
            90% { opacity: 0.8; }
            100% {
                transform: translateY(-100vh) rotate(360deg) scale(1);
                opacity: 0;
            }
        }

        /* Rose petals */
        .petal {
            position: absolute;
            top: -20px;
            width: 15px;
            height: 15px;
            background: linear-gradient(135deg, #ffb6c1, #ff69b4);
            border-radius: 50% 0 50% 50%;
            opacity: 0;
            animation: petalFall 8s ease-in-out infinite;
        }

        @keyframes petalFall {
            0% {
                transform: translateY(0) rotate(0deg) translateX(0);
                opacity: 0;
            }
            10% { opacity: 0.7; }
            90% { opacity: 0.7; }
            100% {
                transform: translateY(100vh) rotate(720deg) translateX(100px);
                opacity: 0;
            }
        }

        /* ============================================
           ENVELOPE INTRO ANIMATION
        ============================================ */
        .envelope-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 100;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            transition: opacity 0.8s ease, visibility 0.8s ease;
        }

        .envelope-container.hidden {
            opacity: 0;
            visibility: hidden;
            pointer-events: none;
        }

        .envelope {
            position: relative;
            width: 280px;
            height: 180px;
            cursor: pointer;
            transform-style: preserve-3d;
            animation: envelopeFloat 3s ease-in-out infinite;
        }

        @keyframes envelopeFloat {
            0%, 100% { transform: translateY(0) rotate(-2deg); }
            50% { transform: translateY(-15px) rotate(2deg); }
        }

        .envelope-body {
            position: absolute;
            width: 100%;
            height: 100%;
            background: linear-gradient(145deg, #fff5f5, #ffe4e8);
            border-radius: 10px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        .envelope-flap {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(145deg, #fff0f3, #ffd6dc);
            clip-path: polygon(0 0, 50% 60%, 100% 0);
            transform-origin: top center;
            transition: transform 0.6s ease;
            z-index: 2;
        }

        .envelope:hover .envelope-flap {
            transform: rotateX(180deg);
        }

        .envelope-heart {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 50px;
            z-index: 1;
            animation: heartPulse 1s ease-in-out infinite;
        }

        @keyframes heartPulse {
            0%, 100% { transform: translate(-50%, -50%) scale(1); }
            50% { transform: translate(-50%, -50%) scale(1.15); }
        }

        .envelope-text {
            position: absolute;
            bottom: -50px;
            left: 50%;
            transform: translateX(-50%);
            font-family: var(--font-script);
            font-size: 1.5rem;
            color: var(--color-cream);
            white-space: nowrap;
            animation: textGlow 2s ease-in-out infinite;
        }

        @keyframes textGlow {
            0%, 100% { text-shadow: 0 0 10px rgba(255,255,255,0.5); }
            50% { text-shadow: 0 0 20px rgba(255,255,255,0.8), 0 0 30px rgba(255,100,150,0.5); }
        }

        /* Wax seal */
        .wax-seal {
            position: absolute;
            bottom: -15px;
            left: 50%;
            transform: translateX(-50%);
            width: 50px;
            height: 50px;
            background: radial-gradient(circle at 30% 30%, #c41e3a, #8b0000);
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 24px;
            box-shadow:
                0 4px 8px rgba(0,0,0,0.3),
                inset 0 2px 4px rgba(255,255,255,0.2);
            z-index: 3;
        }

        /* ============================================
           MAIN CARD
        ============================================ */
        .card-wrapper {
            position: relative;
            z-index: 10;
            opacity: 0;
            transform: scale(0.8) translateY(30px);
            transition: all 0.8s var(--transition-bounce);
        }

        .card-wrapper.visible {
            opacity: 1;
            transform: scale(1) translateY(0);
        }

        .card {
            background: linear-gradient(145deg, #fffaf0, #fff5ee);
            border-radius: 20px;
            padding: 50px 60px;
            text-align: center;
            box-shadow:
                0 30px 60px rgba(0,0,0,0.3),
                inset 0 0 100px rgba(255,255,255,0.5);
            position: relative;
            max-width: 480px;
            width: 90%;
            border: 3px solid transparent;
            background-clip: padding-box;
            overflow: visible;
        }

        /* Decorative ribbon */
        .ribbon {
            position: absolute;
            top: -15px;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(135deg, #c41e3a, #8b0000);
            color: white;
            padding: 8px 30px;
            font-family: var(--font-body);
            font-size: 0.75rem;
            font-weight: 600;
            letter-spacing: 2px;
            text-transform: uppercase;
            box-shadow: 0 4px 15px rgba(139, 0, 0, 0.4);
        }

        .ribbon::before,
        .ribbon::after {
            content: '';
            position: absolute;
            bottom: -8px;
            border: 8px solid transparent;
            border-top-color: #6b0000;
        }

        .ribbon::before {
            left: 0;
            border-left-color: #6b0000;
        }

        .ribbon::after {
            right: 0;
            border-right-color: #6b0000;
        }

        /* Corner decorations */
        .corner {
            position: absolute;
            width: 60px;
            height: 60px;
            opacity: 0.6;
        }

        .corner-tl { top: 10px; left: 10px; }
        .corner-tr { top: 10px; right: 10px; transform: scaleX(-1); }
        .corner-bl { bottom: 10px; left: 10px; transform: scaleY(-1); }
        .corner-br { bottom: 10px; right: 10px; transform: scale(-1); }

        .corner svg {
            width: 100%;
            height: 100%;
            fill: var(--color-gold);
        }

        /* ============================================
           TYPOGRAPHY WITH TYPEWRITER EFFECT
        ============================================ */
        .heart-icon {
            font-size: 70px;
            display: inline-block;
            animation: heartBeat 1.2s ease-in-out infinite;
            filter: drop-shadow(0 5px 20px rgba(255, 100, 150, 0.6));
            margin-bottom: 15px;
        }

        @keyframes heartBeat {
            0%, 100% { transform: scale(1); }
            15% { transform: scale(1.15); }
            30% { transform: scale(1); }
            45% { transform: scale(1.1); }
            60% { transform: scale(1); }
        }

        .title {
            font-family: var(--font-script);
            font-size: 3rem;
            color: var(--color-text);
            margin: 10px 0;
            line-height: 1.2;
            min-height: 80px;
        }

        .title .cursor {
            display: inline-block;
            width: 3px;
            height: 45px;
            background: var(--color-secondary);
            margin-left: 5px;
            animation: blink 0.8s step-end infinite;
            vertical-align: middle;
        }

        @keyframes blink {
            50% { opacity: 0; }
        }

        .subtitle {
            font-size: 1rem;
            color: var(--color-text-light);
            font-weight: 400;
            margin: 20px 0 30px;
            font-style: italic;
            opacity: 0;
            animation: fadeIn 1s ease 2.5s forwards;
        }

        @keyframes fadeIn {
            to { opacity: 1; }
        }

        /* ============================================
           LOVE METER
        ============================================ */
        .love-meter {
            margin: 20px 0;
            opacity: 0;
            animation: fadeIn 1s ease 3s forwards;
        }

        .love-meter-label {
            font-size: 0.85rem;
            color: var(--color-text-light);
            margin-bottom: 8px;
            display: flex;
            justify-content: space-between;
        }

        .love-meter-bar {
            height: 12px;
            background: #eee;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.1);
        }

        .love-meter-fill {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, #ff6b6b, #ff8e8e, #ff6b6b);
            background-size: 200% 100%;
            border-radius: 10px;
            transition: width 0.3s ease;
            animation: shimmer 2s linear infinite;
        }

        @keyframes shimmer {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }

        /* ============================================
           BUTTONS
        ============================================ */
        .buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            min-height: 70px;
            align-items: center;
            margin-top: 25px;
            opacity: 0;
            animation: fadeIn 1s ease 3.2s forwards;
        }

        .btn {
            padding: 16px 40px;
            font-size: 1.1rem;
            font-weight: 600;
            font-family: var(--font-body);
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s var(--transition-smooth);
            position: relative;
            letter-spacing: 0.5px;
            overflow: hidden;
        }

        /* Yes Button with growing effect */
        .btn-yes {
            background: linear-gradient(135deg, #ff6b6b 0%, #c44569 100%);
            color: white;
            box-shadow: 0 8px 25px rgba(196, 69, 105, 0.4);
            transform-origin: center;
        }

        .btn-yes::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255,255,255,0.2);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .btn-yes:hover::before {
            width: 300px;
            height: 300px;
        }

        .btn-yes:hover {
            transform: scale(1.1);
            box-shadow: 0 15px 40px rgba(196, 69, 105, 0.5);
        }

        /* Sparkle effect on yes button */
        .btn-yes .sparkle {
            position: absolute;
            width: 10px;
            height: 10px;
            background: white;
            border-radius: 50%;
            opacity: 0;
            pointer-events: none;
        }

        /* No Button */
        .btn-no {
            background: linear-gradient(135deg, #f5f5f5, #e0e0e0);
            color: var(--color-text-light);
            border: 2px solid #ddd;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            position: fixed;
            z-index: 1000;
            user-select: none;
            transition:
                left 0.3s var(--transition-smooth),
                top 0.3s var(--transition-smooth),
                transform 0.2s ease,
                box-shadow 0.3s ease;
        }

        .btn-no:hover {
            transform: translate(-50%, -50%) rotate(5deg);
        }

        /* ============================================
           SUCCESS SCREEN
        ============================================ */
        .success-screen {
            display: none;
            flex-direction: column;
            align-items: center;
        }

        .success-screen.active {
            display: flex;
            animation: successPop 0.8s var(--transition-bounce);
        }

        @keyframes successPop {
            0% { transform: scale(0); opacity: 0; }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); opacity: 1; }
        }

        .success-heart {
            font-size: 100px;
            animation: celebrateHeart 0.5s ease infinite alternate;
        }

        @keyframes celebrateHeart {
            0% { transform: scale(1) rotate(-10deg); }
            100% { transform: scale(1.15) rotate(10deg); }
        }

        .success-title {
            font-family: var(--font-script);
            font-size: 2.5rem;
            color: var(--color-text);
            margin-top: 20px;
        }

        .success-message {
            color: var(--color-text-light);
            margin-top: 10px;
            font-size: 1.1rem;
        }

        /* ============================================
           CURSOR TRAIL
        ============================================ */
        .cursor-heart {
            position: fixed;
            pointer-events: none;
            z-index: 9999;
            font-size: 20px;
            animation: cursorFade 1s ease-out forwards;
        }

        @keyframes cursorFade {
            0% {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
            100% {
                opacity: 0;
                transform: scale(0.5) translateY(-30px);
            }
        }

        /* ============================================
           CONFETTI & PARTICLES
        ============================================ */
        .confetti {
            position: fixed;
            top: -20px;
            z-index: 100;
            animation: confettiFall linear forwards;
            pointer-events: none;
        }

        @keyframes confettiFall {
            0% {
                transform: translateY(0) rotate(0deg) scale(1);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(720deg) scale(0.5);
                opacity: 0;
            }
        }

        .heart-particle {
            position: fixed;
            font-size: 24px;
            pointer-events: none;
            z-index: 100;
            animation: burstOut 1.5s ease-out forwards;
        }

        @keyframes burstOut {
            0% {
                transform: translate(0, 0) scale(0);
                opacity: 1;
            }
            30% {
                opacity: 1;
                transform: scale(1.3);
            }
            100% {
                opacity: 0;
            }
        }

        /* ============================================
           CLICK RIPPLE
        ============================================ */
        .ripple {
            position: fixed;
            border: 3px solid #ff6b9d;
            border-radius: 50%;
            pointer-events: none;
            animation: rippleEffect 0.8s ease-out forwards;
            z-index: 9998;
        }

        @keyframes rippleEffect {
            0% {
                width: 0;
                height: 0;
                opacity: 1;
            }
            100% {
                width: 150px;
                height: 150px;
                opacity: 0;
            }
        }

        /* ============================================
           RESPONSIVE
        ============================================ */
        @media (max-width: 600px) {
            .card {
                padding: 40px 25px;
                margin: 15px;
            }

            .title {
                font-size: 2.2rem;
            }

            .heart-icon {
                font-size: 55px;
            }

            .envelope {
                width: 220px;
                height: 140px;
            }

            .btn {
                padding: 14px 30px;
                font-size: 1rem;
            }
        }
    </style>
</head>
<body>
    <!-- Starry Background -->
    <div class="stars" id="stars"></div>

    <!-- Background Image -->
    <div class="background"></div>

    <!-- Floating Elements -->
    <div class="floating-container" id="floatingContainer"></div>

    <!-- Envelope Intro -->
    <div class="envelope-container" id="envelopeContainer">
        <div class="envelope" id="envelope" onclick="openEnvelope()">
            <div class="envelope-body"></div>
            <div class="envelope-flap"></div>
            <div class="envelope-heart">üíå</div>
            <div class="wax-seal">‚ù§</div>
            <div class="envelope-text">Click to Open</div>
        </div>
    </div>

    <!-- Main Card -->
    <div class="card-wrapper" id="cardWrapper">
        <div class="card">
            <div class="ribbon">With Love</div>

            <!-- Corner Decorations -->
            <div class="corner corner-tl">
                <svg viewBox="0 0 100 100"><path d="M0,0 Q50,0 50,50 Q50,0 100,0 L100,10 Q50,10 50,60 Q50,10 0,10 Z"/></svg>
            </div>
            <div class="corner corner-tr">
                <svg viewBox="0 0 100 100"><path d="M0,0 Q50,0 50,50 Q50,0 100,0 L100,10 Q50,10 50,60 Q50,10 0,10 Z"/></svg>
            </div>
            <div class="corner corner-bl">
                <svg viewBox="0 0 100 100"><path d="M0,0 Q50,0 50,50 Q50,0 100,0 L100,10 Q50,10 50,60 Q50,10 0,10 Z"/></svg>
            </div>
            <div class="corner corner-br">
                <svg viewBox="0 0 100 100"><path d="M0,0 Q50,0 50,50 Q50,0 100,0 L100,10 Q50,10 50,60 Q50,10 0,10 Z"/></svg>
            </div>

            <!-- Main Content -->
            <div class="main-content" id="mainContent">
                <div class="heart-icon">üíù</div>
                <h1 class="title" id="title"><span class="cursor"></span></h1>
                <p class="subtitle">"You are my today and all of my tomorrows"</p>

                <!-- Love Meter -->
                <div class="love-meter">
                    <div class="love-meter-label">
                        <span>My Love for You</span>
                        <span id="lovePercent">100%</span>
                    </div>
                    <div class="love-meter-bar">
                        <div class="love-meter-fill" id="loveFill"></div>
                    </div>
                </div>

                <div class="buttons">
                    <button class="btn btn-yes" id="yesBtn">Yes! üíñ</button>
                </div>
            </div>

            <!-- Success Screen -->
            <div class="success-screen" id="successScreen">
                <div class="success-heart">üíñ</div>
                <h2 class="success-title">I Love You Forever!</h2>
                <p class="success-message">You just made me the happiest person alive</p>
            </div>
        </div>
    </div>

    <!-- No Button (outside card) -->
    <button class="btn btn-no" id="noBtn">No üòú</button>

    <script>
        /**
         * ============================================
         * VALENTINE PROPOSAL - ENHANCED INTERACTIVE
         * ============================================
         */

        // DOM Elements
        const envelopeContainer = document.getElementById('envelopeContainer');
        const cardWrapper = document.getElementById('cardWrapper');
        const yesBtn = document.getElementById('yesBtn');
        const noBtn = document.getElementById('noBtn');
        const mainContent = document.getElementById('mainContent');
        const successScreen = document.getElementById('successScreen');
        const titleEl = document.getElementById('title');
        const loveFill = document.getElementById('loveFill');
        const floatingContainer = document.getElementById('floatingContainer');
        const starsContainer = document.getElementById('stars');

        // Config
        const CONFIG = {
            escapeRadius: 100,
            escapeDistance: 150,
            viewportPadding: 60,
            starCount: 100,
            heartCount: 12,
            petalCount: 15
        };

        // Messages
        const escapeMessages = [
            "No üòú", "Nope!", "Try again!", "Hehe üôà",
            "Catch me!", "Too slow!", "Just say Yes!",
            "Please? ü•∫", "Not happening!", "Nice try!"
        ];

        let escapeCount = 0;
        let isEnvelopeOpen = false;
        let loveLevel = 100;

        /**
         * Create starry background
         */
        function createStars() {
            for (let i = 0; i < CONFIG.starCount; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.left = `${Math.random() * 100}%`;
                star.style.top = `${Math.random() * 100}%`;
                star.style.animationDelay = `${Math.random() * 3}s`;
                star.style.animationDuration = `${1.5 + Math.random() * 2}s`;
                starsContainer.appendChild(star);
            }

            // Add shooting stars
            for (let i = 0; i < 3; i++) {
                const shootingStar = document.createElement('div');
                shootingStar.className = 'shooting-star';
                shootingStar.style.top = `${Math.random() * 50}%`;
                shootingStar.style.right = `-100px`;
                shootingStar.style.animationDelay = `${i * 4 + Math.random() * 2}s`;
                starsContainer.appendChild(shootingStar);
            }
        }

        /**
         * Create floating hearts and petals
         */
        function createFloatingElements() {
            const hearts = ['‚ù§Ô∏è', 'üíï', 'üíñ', 'üíó', 'üíì'];

            for (let i = 0; i < CONFIG.heartCount; i++) {
                const heart = document.createElement('div');
                heart.className = 'floating-heart';
                heart.textContent = hearts[Math.floor(Math.random() * hearts.length)];
                heart.style.left = `${Math.random() * 100}%`;
                heart.style.fontSize = `${20 + Math.random() * 25}px`;
                heart.style.animationDelay = `${Math.random() * 10}s`;
                heart.style.animationDuration = `${8 + Math.random() * 6}s`;
                floatingContainer.appendChild(heart);
            }

            for (let i = 0; i < CONFIG.petalCount; i++) {
                const petal = document.createElement('div');
                petal.className = 'petal';
                petal.style.left = `${Math.random() * 100}%`;
                petal.style.animationDelay = `${Math.random() * 8}s`;
                petal.style.animationDuration = `${6 + Math.random() * 4}s`;
                floatingContainer.appendChild(petal);
            }
        }

        /**
         * Typewriter effect for title
         */
        function typeWriter(text, element, speed = 80) {
            let i = 0;
            const cursor = element.querySelector('.cursor');

            function type() {
                if (i < text.length) {
                    element.insertBefore(
                        document.createTextNode(text.charAt(i)),
                        cursor
                    );
                    i++;
                    setTimeout(type, speed);
                }
            }
            type();
        }

        /**
         * Open envelope animation
         */
        function openEnvelope() {
            if (isEnvelopeOpen) return;
            isEnvelopeOpen = true;

            // Create ripple effect
            createRipple(window.innerWidth / 2, window.innerHeight / 2);

            setTimeout(() => {
                envelopeContainer.classList.add('hidden');
                cardWrapper.classList.add('visible');
                noBtn.style.opacity = '1';
                positionNoButton();

                // Start typewriter
                setTimeout(() => {
                    typeWriter("Will You Be My Valentine?", titleEl);
                }, 500);

                // Animate love meter
                setTimeout(() => {
                    loveFill.style.width = '100%';
                }, 3500);
            }, 600);
        }

        /**
         * Create cursor heart trail
         */
        let lastTrailTime = 0;
        function createCursorTrail(x, y) {
            const now = Date.now();
            if (now - lastTrailTime < 100) return;
            lastTrailTime = now;

            const hearts = ['üíï', 'üíñ', '‚ù§Ô∏è', '‚ú®'];
            const heart = document.createElement('div');
            heart.className = 'cursor-heart';
            heart.textContent = hearts[Math.floor(Math.random() * hearts.length)];
            heart.style.left = `${x}px`;
            heart.style.top = `${y}px`;
            document.body.appendChild(heart);

            setTimeout(() => heart.remove(), 1000);
        }

        /**
         * Create click ripple effect
         */
        function createRipple(x, y) {
            const ripple = document.createElement('div');
            ripple.className = 'ripple';
            ripple.style.left = `${x}px`;
            ripple.style.top = `${y}px`;
            ripple.style.transform = 'translate(-50%, -50%)';
            document.body.appendChild(ripple);

            setTimeout(() => ripple.remove(), 800);
        }

        /**
         * Position No button
         */
        function positionNoButton() {
            const yesRect = yesBtn.getBoundingClientRect();
            noBtn.style.left = `${yesRect.right + 50}px`;
            noBtn.style.top = `${yesRect.top + yesRect.height / 2}px`;
            noBtn.style.transform = 'translate(-50%, -50%)';
        }

        /**
         * Calculate distance
         */
        function getDistance(x1, y1, x2, y2) {
            return Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));
        }

        /**
         * Handle pointer move for No button
         */
        function handlePointerMove(clientX, clientY) {
            if (!isEnvelopeOpen) return;

            const rect = noBtn.getBoundingClientRect();
            const btnX = rect.left + rect.width / 2;
            const btnY = rect.top + rect.height / 2;
            const distance = getDistance(clientX, clientY, btnX, btnY);

            if (distance < CONFIG.escapeRadius) {
                escapeButton(clientX, clientY, btnX, btnY);
            }
        }

        /**
         * Escape button logic
         */
        function escapeButton(pointerX, pointerY, btnX, btnY) {
            escapeCount = (escapeCount + 1) % escapeMessages.length;
            noBtn.textContent = escapeMessages[escapeCount];

            const angle = Math.atan2(btnY - pointerY, btnX - pointerX);
            const randomOffset = (Math.random() - 0.5) * 0.5;
            const finalAngle = angle + randomOffset;

            let newX = btnX + Math.cos(finalAngle) * CONFIG.escapeDistance;
            let newY = btnY + Math.sin(finalAngle) * CONFIG.escapeDistance;

            const maxX = window.innerWidth - CONFIG.viewportPadding;
            const maxY = window.innerHeight - CONFIG.viewportPadding;

            newX = Math.max(CONFIG.viewportPadding, Math.min(maxX, newX));
            newY = Math.max(CONFIG.viewportPadding, Math.min(maxY, newY));

            // Corner escape
            const currentRect = noBtn.getBoundingClientRect();
            const currentX = currentRect.left + currentRect.width / 2;
            const currentY = currentRect.top + currentRect.height / 2;

            if (Math.abs(newX - currentX) < 20 && Math.abs(newY - currentY) < 20) {
                newX = pointerX < window.innerWidth / 2
                    ? window.innerWidth - CONFIG.viewportPadding - 50
                    : CONFIG.viewportPadding + 50;
                newY = pointerY < window.innerHeight / 2
                    ? window.innerHeight - CONFIG.viewportPadding - 50
                    : CONFIG.viewportPadding + 50;
            }

            noBtn.style.left = `${newX}px`;
            noBtn.style.top = `${newY}px`;
            noBtn.style.transform = 'translate(-50%, -50%)';
        }

        /**
         * Create confetti
         */
        function createConfetti() {
            const colors = ['#ff6b6b', '#ffd93d', '#6bcb77', '#4d96ff', '#ff6b9d', '#c44569'];
            const shapes = ['‚óè', '‚ñ†', '‚ñ≤', '‚ù§', '‚òÖ'];

            for (let i = 0; i < 80; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.textContent = shapes[Math.floor(Math.random() * shapes.length)];
                    confetti.style.left = `${Math.random() * 100}%`;
                    confetti.style.color = colors[Math.floor(Math.random() * colors.length)];
                    confetti.style.fontSize = `${15 + Math.random() * 20}px`;
                    confetti.style.animationDuration = `${2 + Math.random() * 2}s`;
                    document.body.appendChild(confetti);

                    setTimeout(() => confetti.remove(), 4000);
                }, i * 30);
            }
        }

        /**
         * Create heart burst
         */
        function createHeartBurst() {
            const hearts = ['üíñ', 'üíï', '‚ù§Ô∏è', 'üíó', 'üíì', '‚ú®', 'üíù'];
            const card = document.querySelector('.card');
            const rect = card.getBoundingClientRect();
            const centerX = rect.left + rect.width / 2;
            const centerY = rect.top + rect.height / 2;

            for (let i = 0; i < 15; i++) {
                const heart = document.createElement('div');
                heart.className = 'heart-particle';
                heart.textContent = hearts[Math.floor(Math.random() * hearts.length)];
                heart.style.left = `${centerX}px`;
                heart.style.top = `${centerY}px`;

                const angle = (i / 15) * Math.PI * 2;
                const distance = 100 + Math.random() * 80;
                const endX = Math.cos(angle) * distance;
                const endY = Math.sin(angle) * distance;

                heart.style.transform = `translate(${endX}px, ${endY}px)`;
                document.body.appendChild(heart);

                setTimeout(() => heart.remove(), 1500);
            }
        }

        /**
         * Handle Yes click
         */
        function handleYesClick() {
            mainContent.style.display = 'none';
            successScreen.classList.add('active');
            createConfetti();
            createHeartBurst();
        }

        /**
         * Yes button hover - increase love meter effect
         */
        yesBtn.addEventListener('mouseenter', () => {
            if (loveLevel < 150) {
                loveLevel += 10;
                loveFill.style.width = `${Math.min(loveLevel, 100)}%`;
            }
        });

        /**
         * Initialize
         */
        function init() {
            createStars();
            createFloatingElements();

            // Hide No button initially
            noBtn.style.opacity = '0';

            // Event listeners
            yesBtn.addEventListener('click', handleYesClick);

            document.addEventListener('mousemove', (e) => {
                handlePointerMove(e.clientX, e.clientY);
                createCursorTrail(e.clientX, e.clientY);
            });

            document.addEventListener('touchmove', (e) => {
                const touch = e.touches[0];
                handlePointerMove(touch.clientX, touch.clientY);
            }, { passive: true });

            document.addEventListener('click', (e) => {
                createRipple(e.clientX, e.clientY);
            });

            noBtn.addEventListener('click', (e) => {
                e.preventDefault();
                e.stopPropagation();
                const rect = noBtn.getBoundingClientRect();
                escapeButton(e.clientX, e.clientY, rect.left + rect.width / 2, rect.top + rect.height / 2);
            });

            window.addEventListener('resize', () => {
                if (isEnvelopeOpen) {
                    const rect = noBtn.getBoundingClientRect();
                    if (rect.left < 0 || rect.right > window.innerWidth) {
                        positionNoButton();
                    }
                }
            });
        }

        init();
    </script>
</body>
</html>
